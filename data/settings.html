<!DOCTYPE html>
<html>

<head>
  <title>Settings</title>
  <link rel="icon" href="favicon.ico">
  <link type="text/css" rel="stylesheet" href="style.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <meta http-equiv="content-type" charset="utf-8">

  <script type="text/javascript" src="jquery-3.5.1.slim.min.js"></script>

  <script type="text/javascript">

    function doPost(url, data) {
      console.log(url);
      var xhr = new XMLHttpRequest();
      xhr.open("POST", url);
      xhr.setRequestHeader("Content-Type", "application/json");
      xhr.onload = () => {
        console.log(xhr.status);
        console.log("success!");
      };
      xhr.onerror = () => {
        console.log(xhr.status);
        console.log("error!");
      };
      xhr.send(data);
    }

    $(document).on('touchstart touchend', '#SUBMIT_SETTING', function () {

      var url = "http://" + document.location.host + "/";
      var JSONdata = {
        SPERK_TIME: parseInt($("#SPERK_TIME").val()),
        RELEASE_TIME: parseInt($("#RELEASE_TIME").val())
      };

      doPost(url, JSON.stringify(JSONdata));

    })

  </script>

</head>

<body id="body">
  <h1>Settings</h1>
  <hr>
  <table>
    <tr>
      <td>Sperking Time(ms)</td>
    </tr>
    <tr>
      <td><input type="number" id="SPERK_TIME" name="SPERK_TIME" value="%SPERK_TIME%" /></td>
    </tr>
    <tr>
      <td>Release Time(ms)</td>
    </tr>
    <tr>
      <td><input type="number" id="RELEASE_TIME" name="RELEASE_TIME" value="%RELEASE_TIME%" /></td>
    </tr>
  </table>
  <p></p>
  <div class="container">
  <button onclick="location.href='/'" id="SUBMIT_SETTING" class="btn1 btn3">Set value</button>
  <p></p>
  <button onclick="location.href='/STAmode'" id="STA" class="btn1 btn3">Start Config Portal</button>
  <p></p>
  <button onclick="location.href='/APmode'" id="AP" class="btn1 btn3">Start AP mode</button>
  </div>
  <hr>
</body>

</html>